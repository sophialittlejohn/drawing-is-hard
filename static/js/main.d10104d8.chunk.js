(this["webpackJsonpdrawing-is-hard"]=this["webpackJsonpdrawing-is-hard"]||[]).push([[0],{156:function(e,t,n){e.exports=n(296)},161:function(e,t,n){},288:function(e,t){},289:function(e,t){},290:function(e,t){},291:function(e,t){},292:function(e,t){},293:function(e,t){},294:function(e){e.exports=JSON.parse('["bird","book","car","cat","chair","flower","plane","sheep","ship","strawberry"]')},295:function(e,t,n){},296:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),l=n(35),c=n.n(l),o=(n(161),n(162),n(40)),u=n(10),s=n(42),i=n(301),m=n(305),f=n(303),d=n(306),E=n(304),p=n(44),b=function(){var e,t=Object(u.f)().push,n=Object(u.g)().state;return r.a.createElement(i.a,{style:{paddingTop:"10%"},text:!0},r.a.createElement(m.a,null,r.a.createElement(m.a.Row,null,r.a.createElement(m.a.Column,null,r.a.createElement(f.a,{fluid:!0,color:"blue"},r.a.createElement(f.a.Content,null,r.a.createElement(d.a,{as:"h1"},"Drawing Is Hard"))))),r.a.createElement(m.a.Row,null,r.a.createElement(m.a.Column,null,r.a.createElement(f.a,{fluid:!0,raised:!0},r.a.createElement(f.a.Content,{style:{fontSize:"20px"}},r.a.createElement("p",null,"This game has been modeled off Google's"," ",r.a.createElement("a",{href:"https://quickdraw.withgoogle.com/"},"Quick, Draw!")," ","game and uses a sampling from the Quick, Draw! dataset."),r.a.createElement("p",null,"It was developed in the context of my capstone project at"," ",r.a.createElement("a",{href:"https://www.extensionschool.ch/"},"EPFL Extension School"),"."),r.a.createElement("p",null,"Check out the source code in my"," ",r.a.createElement("a",{href:"https://github.com/sophialittlejohn/drawing-is-hard"},"GitHub repo"),"."))))),r.a.createElement(m.a.Row,null,r.a.createElement(m.a.Column,{width:"14"},r.a.createElement(E.a,{onClick:function(){return t("/play",n)},size:"massive",primary:!0,fluid:!0},"Play")),r.a.createElement(m.a.Column,{width:"2"},r.a.createElement(E.a,(e={icon:!0,size:"massive",fluid:!0},Object(s.a)(e,"icon",!0),Object(s.a)(e,"basic",!0),Object(s.a)(e,"onClick",(function(){return t("/settings")})),e),r.a.createElement(p.a,{name:"settings"}))))))},h=n(23),v=n(32),g=n.n(v),w=n(101),O=n(51),j=n(18),y=n(52),C={task:null,round:null,score:null,inProgress:null},x=function(e,t){switch(t.type){case"START_GAME":return{round:1,score:0,task:t.payload,inProgress:!0};case"NEW_ROUND":return Object(h.a)(Object(h.a)({},e),{},{task:t.payload,round:e.round+1});case"WIN_ROUND":return Object(h.a)(Object(h.a)({},e),{},{score:e.score+1,round:e.round+1,task:t.payload});case"GAME_OVER":return Object(h.a)(Object(h.a)({},e),{},{inProgress:!1,task:null});case"WIN_GAME":return Object(h.a)(Object(h.a)({},e),{},{inProgress:!1});default:throw new Error}};function R(e,t){var n,a=(n=e,y.b.fromPixels(n.current).resizeNearestNeighbor([28,28]).mean(2).expandDims(2).expandDims().toFloat().div(255));return t.predict(a).data().then(function(){var e=Object(O.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a(t).data();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}var k=r.a.createContext(),S=function(){var e=Object(a.useContext)(k);if(!e)throw new Error("This component must be used within a <Game /> component.");return e},N=r.a.memo((function(e){var t=e.guess,n=S(),l=n.counter,c=n.inProgress,o=Object(a.useRef)(null),u=Object(a.useState)(!1),s=Object(j.a)(u,2),i=s[0],m=s[1],f=Object(a.useState)({x:void 0,y:void 0}),d=Object(j.a)(f,2),E=d[0],p=d[1];Object(a.useEffect)((function(){i&&c&&l&&l<20&&t()}),[i,c,l,t]);return Object(a.useEffect)((function(){var e=o.current,t=e.getContext("2d");t.fillStyle="#ffffff",t.fillRect(0,0,e.height,e.width)}),[]),r.a.createElement("canvas",{height:300,width:300,ref:o,onMouseDown:function(){return m(!0)},onMouseUp:function(){m(!1),p({x:void 0,y:void 0})},onMouseMove:function(e){return function(e){var t=e.target.getBoundingClientRect(),n=e.clientX-t.left,a=e.clientY-t.top;if(i){var r=function(e,t,n,a,r){var l=e.getContext("2d");return l.strokeStyle="#000000",l.lineWidth=12,l.lineJoin="round",l.beginPath(),l.moveTo(a,r),l.lineTo(t,n),l.closePath(),l.stroke(),[t,n]}(e.target,n,a,E.x,E.y),l=Object(j.a)(r,2),c=l[0],o=l[1];p({x:c,y:o})}}(e)},id:"myCanvas",style:{border:"3px dotted gray",cursor:"pointer"}})}));function P(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}return e}var M=function(e,t){var r=Object(a.useRef)(null),l=Object(a.useRef)(null),c=Object(a.useRef)(null),o=Object(a.useRef)(null),u=function(e){var t=Object(a.useState)(null),n=Object(j.a)(t,2),r=n[0],l=n[1];return Object(a.useEffect)((function(){var e=r>0&&setInterval((function(){return l(r-1)}),1e3);return function(){return clearInterval(e)}})),{counter:r,startCounter:function(){l(e)},stopCounter:function(){l(null)}}}(t),s=u.startCounter,i=u.counter,m=u.stopCounter,f=Object(a.useReducer)(x,C),d=Object(j.a)(f,2),E=d[0],p=E.round,b=E.task,h=E.inProgress,v=E.score,k=d[1];Object(a.useEffect)((function(){(function(){var e=Object(O.a)(g.a.mark((function e(){var t,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.c("./model/model.json");case 2:t=e.sent,a=n(294),r.current=Object(w.a)(a),l.current=P(Object(w.a)(a)),c.current=t,o.current=document.getElementById("myCanvas"),S();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var S=function(){k({type:"START_GAME",payload:l.current[0]})},N=function(){var e=o.current;e.getContext("2d").fillRect(0,0,e.height,e.width)},M=function(){var e=Object(O.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(c&&c.current&&o&&o.current)){e.next=5;break}return e.next=3,R(o,c.current);case 3:(t=e.sent)&&r.current[t[0]]===b&&(N(o),m(),k({type:"WIN_ROUND",payload:l.current[p]}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){h&&(v===e?(m(),k({type:"WIN_GAME"})):p===e+1?(m(),k({type:"GAME_OVER"})):0===i&&(N(o),m(),k({type:"NEW_ROUND",payload:l.current[p]})))})),{controls:{startGame:S,stopGame:function(){m(),k({type:"GAME_OVER"})},clearCanvas:N,guess:M,startCounter:s},state:{inProgress:h,task:b,counter:i,round:p,score:v,totalRounds:e,timePerRound:t}}},z=function(){var e=S(),t=e.round,n=e.totalRounds;return r.a.createElement("div",null,"Round ",t," of ",n)},T=n(145),G=n.n(T),I=(n(295),function(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e})),t.current}),D={delay:30,cursor:" ",wrapperClassName:"wrapper"},_=function(e){var t=e.startCounter,n=Object(a.useState)(null),l=Object(j.a)(n,2),c=l[0],o=l[1],u=Object(a.useState)(null),s=Object(j.a)(u,2),i=s[0],m=s[1],f=Object(a.useState)(null),d=Object(j.a)(f,2),E=d[0],p=d[1],b=S(),h=b.counter,v=b.task,g=b.score,w=b.inProgress,O=b.round,y=b.totalRounds,C=b.timePerRound,x=I(v),R=I(g),k=function(){o(null),m(null),p(null)};Object(a.useEffect)((function(){0===h&&k()}),[h]),Object(a.useEffect)((function(){if(g&&R!==g)k(),window.setTimeout((function(){return o("Nice sketch! You have")}));else if(w&&v&&x!==v&&O<y+1){var e="Close... you have ";1===O&&(e="Let's get started, you have "),window.setTimeout((function(){return o(e)}))}}),[w,x,v,g,R,O]);var N=function(e,t,n){return r.a.createElement(r.a.Fragment,null,t,r.a.createElement(G.a,{key:e,options:D,onInit:function(t){return function(e,t,n){e.typeString(t).callFunction(n).start()}(t,e,n)}}))},P=c&&N(c,null,(function(){return m("seconds to draw a")})),M=i&&N(i,r.a.createElement("span",{className:"whitespace"},h||C),(function(){return p("in the box to the left.")})),z=E&&N(E,r.a.createElement("span",{className:"whitespace"},v),(function(){return t()}));return r.a.createElement("div",{className:"wrapper"},P,M,z)},A=function(){var e,t,n=Object(u.f)().push,l=Object(u.g)(),c=(null===(e=l.state)||void 0===e?void 0:e.rounds)||10,o=(null===(t=l.state)||void 0===t?void 0:t.seconds)||20,s=M(c,o),b=s.state,v=s.controls;Object(a.useEffect)((function(){!1===b.inProgress&&n("game-over",{score:b.score})}));var g=Object(a.useMemo)((function(){return b}),[b]);return r.a.createElement(k.Provider,{value:Object(h.a)({},g)},r.a.createElement(i.a,{style:{paddingTop:"10%"},text:!0},r.a.createElement(m.a,{columns:"equal"},r.a.createElement(m.a.Row,null,r.a.createElement(m.a.Column,null,r.a.createElement(f.a,{fluid:!0,color:"olive"},r.a.createElement(f.a.Content,null,r.a.createElement(d.a,{as:"h2"},r.a.createElement(z,null)))))),r.a.createElement(m.a.Row,{stretched:!0},r.a.createElement(m.a.Column,null,r.a.createElement(f.a,{fluid:!0,raised:!0},r.a.createElement(f.a.Content,{style:{fontSize:"20px"}},r.a.createElement(m.a,{columns:"equal"},r.a.createElement(m.a.Row,null,r.a.createElement(m.a.Column,null,r.a.createElement(N,{guess:v.guess})),r.a.createElement(m.a.Column,null,r.a.createElement(_,{startCounter:v.startCounter})))))))),r.a.createElement(m.a.Row,null,r.a.createElement(m.a.Column,{width:"14"},r.a.createElement(E.a,{onClick:v.clearCanvas,size:"massive",color:"olive",fluid:!0},"Clear Canvas")),r.a.createElement(m.a.Column,{width:"two"},r.a.createElement(E.a,{onClick:function(){return n("/")},size:"massive",fluid:!0,icon:!0,basic:!0,color:"olive"},r.a.createElement(p.a,{name:"home"})))))))},W="Hmmm, you can probably do better than that!",F="Not so shabby. Bet you can beat that in the next round!",B="Wow, impressive! You deserve a margarita at the beach \ud83c\udf78\ud83c\udf34",U=function(){var e=Object(u.f)().replace,t=Object(u.g)().state,n=t?t.score:0,a=n>=9?B:n>=5?F:W;return r.a.createElement(i.a,{style:{paddingTop:"10%"},text:!0},r.a.createElement(m.a,null,r.a.createElement(m.a.Row,null,r.a.createElement(m.a.Column,null,r.a.createElement(f.a,{fluid:!0,color:"blue"},r.a.createElement(f.a.Content,null,r.a.createElement(d.a,{as:"h1"},"Drawing is hard - Final score ",n))))),r.a.createElement(m.a.Row,null,r.a.createElement(m.a.Column,null,r.a.createElement(f.a,{fluid:!0,raised:!0},r.a.createElement(f.a.Content,{style:{fontSize:"20px"}},r.a.createElement("p",null,"GAME OVER!"),r.a.createElement("p",null,"You scored ",r.a.createElement("strong",null,n)," points."),r.a.createElement("p",null,a))))),r.a.createElement(m.a.Row,null,r.a.createElement(m.a.Column,{width:"14"},r.a.createElement(E.a,{onClick:function(){return e("/play")},size:"massive",color:"blue",fluid:!0},"Play again")),r.a.createElement(m.a.Column,{width:"two"},r.a.createElement(E.a,{onClick:function(){return e("/")},size:"massive",fluid:!0,icon:!0,basic:!0,color:"blue","aria-label":"home"},r.a.createElement(p.a,{name:"home"}))))))},J=function(){var e=Object(u.f)().push,t=Object(a.useState)(10),n=Object(j.a)(t,2),l=n[0],c=n[1],o=Object(a.useState)(20),s=Object(j.a)(o,2),p=s[0],b=s[1];return r.a.createElement(i.a,{style:{paddingTop:"10%"},text:!0},r.a.createElement(m.a,null,r.a.createElement(m.a.Row,null,r.a.createElement(m.a.Column,null,r.a.createElement(f.a,{fluid:!0,color:"orange"},r.a.createElement(f.a.Content,null,r.a.createElement(d.a,{as:"h1"},"Settings"))))),r.a.createElement(m.a.Row,null,r.a.createElement(m.a.Column,null,r.a.createElement(f.a,{fluid:!0,raised:!0},r.a.createElement(f.a.Content,{style:{fontSize:"20px",display:"flex",justifyContent:"space-between",flexDirection:"column"}},r.a.createElement("div",{style:{fontSize:"20px",display:"flex",justifyContent:"space-between",marginBottom:"16px"}},r.a.createElement("label",{htmlFor:"rounds"},"Number of rounds"),r.a.createElement("input",{type:"range",id:"rounds",name:"rounds",min:"1",max:"10",step:"1",value:l,onChange:function(e){return c(parseInt(e.target.value))}}),l),r.a.createElement("div",{style:{fontSize:"20px",display:"flex",justifyContent:"space-between"}},r.a.createElement("label",{htmlFor:"rounds"},"Seconds per round"),r.a.createElement("input",{type:"range",id:"rounds",name:"rounds",min:"5",max:"30",step:"5",value:p,onChange:function(e){return b(parseInt(e.target.value))}}),p))))),r.a.createElement(m.a.Row,null,r.a.createElement(m.a.Column,null,r.a.createElement(E.a,{onClick:function(){return e("/",{rounds:l,seconds:p})},size:"massive",color:"orange",fluid:!0},"Save and go back")))))},V=function(){return r.a.createElement(o.a,{basename:"/drawing-is-hard"},r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/"},r.a.createElement(b,null)),r.a.createElement(u.a,{exact:!0,path:"/settings"},r.a.createElement(J,null)),r.a.createElement(u.a,{path:"/play"},r.a.createElement(A,null)),r.a.createElement(u.a,{path:"/game-over"},r.a.createElement(U,null))))};c.a.render(r.a.createElement(V,null),document.getElementById("root"))}},[[156,1,2]]]);
//# sourceMappingURL=main.d10104d8.chunk.js.map