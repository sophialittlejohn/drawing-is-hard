(this["webpackJsonpdrawing-is-hard"]=this["webpackJsonpdrawing-is-hard"]||[]).push([[0],{155:function(e,t,n){e.exports=n(295)},160:function(e,t,n){},287:function(e,t){},288:function(e,t){},289:function(e,t){},290:function(e,t){},291:function(e,t){},292:function(e,t){},293:function(e){e.exports=JSON.parse('["bird","book","car","cat","chair","flower","plane","sheep","ship","strawberry"]')},294:function(e,t,n){},295:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),l=n(35),c=n.n(l),o=(n(160),n(161),n(40)),u=n(10),s=n(300),i=n(304),m=n(302),f=n(305),d=n(303),E=n(43),p=function(){var e=Object(u.f)().push,t=Object(u.g)().state;return r.a.createElement(s.a,{style:{paddingTop:"10%"},text:!0},r.a.createElement(i.a,null,r.a.createElement(i.a.Row,null,r.a.createElement(i.a.Column,null,r.a.createElement(m.a,{fluid:!0,color:"blue"},r.a.createElement(m.a.Content,null,r.a.createElement(f.a,{as:"h1"},"Drawing Is Hard"))))),r.a.createElement(i.a.Row,null,r.a.createElement(i.a.Column,null,r.a.createElement(m.a,{fluid:!0,raised:!0},r.a.createElement(m.a.Content,{style:{fontSize:"20px"}},r.a.createElement("p",null,"Can a neural network learn to recognize doodling?"),r.a.createElement("p",null,"This game is based on Google's"," ",r.a.createElement("a",{href:"https://quickdraw.withgoogle.com/"},"Quick, Draw!")," ","game and uses a sampling it's trained neural network dataset."),r.a.createElement("p",null,"It was developed in the context of my capstone project at"," ",r.a.createElement("a",{href:"https://www.extensionschool.ch/"},"EPFL Extension School"),"."),r.a.createElement("p",null,"Check out the source code on"," ",r.a.createElement("a",{href:"https://github.com/sophialittlejohn/drawing-is-hard"},"GitHub"),"."))))),r.a.createElement(i.a.Row,null,r.a.createElement(i.a.Column,{width:"14"},r.a.createElement(d.a,{onClick:function(){return e("/play",t)},size:"massive",primary:!0,fluid:!0},"Play")),r.a.createElement(i.a.Column,{width:"2"},r.a.createElement(d.a,{icon:!0,size:"massive",fluid:!0,basic:!0,onClick:function(){return e("/settings")}},r.a.createElement(E.a,{name:"settings"}))))))},b=n(23),h=n(32),v=n.n(h),g=n(100),w=n(50),O=n(18),j=n(51),y={task:null,round:null,score:null,inProgress:null},C=function(e,t){switch(t.type){case"START_GAME":return{round:1,score:0,task:t.payload,inProgress:!0};case"NEW_ROUND":return Object(b.a)(Object(b.a)({},e),{},{task:t.payload,round:e.round+1});case"WIN_ROUND":return Object(b.a)(Object(b.a)({},e),{},{score:e.score+1,round:e.round+1,task:t.payload});case"GAME_OVER":return Object(b.a)(Object(b.a)({},e),{},{inProgress:!1,task:null});case"WIN_GAME":return Object(b.a)(Object(b.a)({},e),{},{inProgress:!1});default:throw new Error}};function x(e,t){var n,a=(n=e,j.b.fromPixels(n.current).resizeNearestNeighbor([28,28]).mean(2).expandDims(2).expandDims().toFloat().div(255));return t.predict(a).data().then(function(){var e=Object(w.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a(t).data();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}var R=r.a.createContext(),k=function(){var e=Object(a.useContext)(R);if(!e)throw new Error("This component must be used within a <Game /> component.");return e},S=r.a.memo((function(e){var t=e.guess,n=k(),l=n.counter,c=n.inProgress,o=Object(a.useRef)(null),u=Object(a.useState)(!1),s=Object(O.a)(u,2),i=s[0],m=s[1],f=Object(a.useState)({x:void 0,y:void 0}),d=Object(O.a)(f,2),E=d[0],p=d[1];Object(a.useEffect)((function(){i&&c&&l&&l<20&&t()}),[i,c,l,t]);return Object(a.useEffect)((function(){var e=o.current,t=e.getContext("2d");t.fillStyle="#ffffff",t.fillRect(0,0,e.height,e.width)}),[]),r.a.createElement("canvas",{height:300,width:300,ref:o,onMouseDown:function(){return m(!0)},onMouseUp:function(){m(!1),p({x:void 0,y:void 0})},onMouseMove:function(e){return function(e){var t=e.target.getBoundingClientRect(),n=e.clientX-t.left,a=e.clientY-t.top;if(i){var r=function(e,t,n,a,r){var l=e.getContext("2d");return l.strokeStyle="#000000",l.lineWidth=12,l.lineJoin="round",l.beginPath(),l.moveTo(a,r),l.lineTo(t,n),l.closePath(),l.stroke(),[t,n]}(e.target,n,a,E.x,E.y),l=Object(O.a)(r,2),c=l[0],o=l[1];p({x:c,y:o})}}(e)},id:"myCanvas",style:{border:"3px dotted gray",cursor:"pointer"}})}));function N(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}return e}var P=function(e,t){var r=Object(a.useRef)(null),l=Object(a.useRef)(null),c=Object(a.useRef)(null),o=Object(a.useRef)(null),u=function(e){var t=Object(a.useState)(null),n=Object(O.a)(t,2),r=n[0],l=n[1];return Object(a.useEffect)((function(){var e=r>0&&setInterval((function(){return l(r-1)}),1e3);return function(){return clearInterval(e)}})),{counter:r,startCounter:function(){l(e)},stopCounter:function(){l(null)}}}(t),s=u.startCounter,i=u.counter,m=u.stopCounter,f=Object(a.useReducer)(C,y),d=Object(O.a)(f,2),E=d[0],p=E.round,b=E.task,h=E.inProgress,R=E.score,k=d[1];Object(a.useEffect)((function(){(function(){var e=Object(w.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.c("./model/model.json");case 2:t=e.sent,a=n(293),r.current=Object(g.a)(a),l.current=N(Object(g.a)(a)),c.current=t,o.current=document.getElementById("myCanvas"),S();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var S=function(){k({type:"START_GAME",payload:l.current[0]})},P=function(){var e=o.current;e.getContext("2d").fillRect(0,0,e.height,e.width)},z=function(){var e=Object(w.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(c&&c.current&&o&&o.current)){e.next=5;break}return e.next=3,x(o,c.current);case 3:(t=e.sent)&&r.current[t[0]]===b&&(P(o),m(),k({type:"WIN_ROUND",payload:l.current[p]}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){h&&(R===e?(m(),k({type:"WIN_GAME"})):p===e+1?(m(),k({type:"GAME_OVER"})):0===i&&(P(o),m(),k({type:"NEW_ROUND",payload:l.current[p]})))})),{controls:{startGame:S,stopGame:function(){m(),k({type:"GAME_OVER"})},clearCanvas:P,guess:z,startCounter:s},state:{inProgress:h,task:b,counter:i,round:p,score:R,totalRounds:e,timePerRound:t}}},z=function(){var e=k(),t=e.round,n=e.totalRounds;return r.a.createElement("div",null,"Round ",t," of ",n)},T=n(144),M=n.n(T),I=(n(294),function(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e})),t.current}),G={delay:30,cursor:" ",wrapperClassName:"wrapper"},_=function(e){var t=e.startCounter,n=Object(a.useState)(null),l=Object(O.a)(n,2),c=l[0],o=l[1],u=Object(a.useState)(null),s=Object(O.a)(u,2),i=s[0],m=s[1],f=Object(a.useState)(null),d=Object(O.a)(f,2),E=d[0],p=d[1],b=k(),h=b.counter,v=b.task,g=b.score,w=b.inProgress,j=b.round,y=b.totalRounds,C=b.timePerRound,x=I(v),R=I(g),S=function(){o(null),m(null),p(null)};Object(a.useEffect)((function(){0===h&&S()}),[h]),Object(a.useEffect)((function(){if(g&&R!==g)S(),window.setTimeout((function(){return o("Nice sketch! You have")}));else if(w&&v&&x!==v&&j<y+1){var e="Close... you have ";1===j&&(e="Let's get started, you have "),window.setTimeout((function(){return o(e)}))}}),[w,x,v,g,R,j,y]);var N=function(e,t,n){return r.a.createElement(r.a.Fragment,null,t,r.a.createElement(M.a,{key:e,options:G,onInit:function(t){return function(e,t,n){e.typeString(t).callFunction(n).start()}(t,e,n)}}))},P=c&&N(c,null,(function(){return m("seconds to draw a")})),z=i&&N(i,r.a.createElement("span",{className:"whitespace"},h||C),(function(){return p("in the box to the left.")})),T=E&&N(E,r.a.createElement("span",{className:"whitespace"},v),(function(){return t()}));return r.a.createElement("div",{className:"wrapper"},P,z,T)},D=function(){var e,t,n=Object(u.f)().push,l=Object(u.g)(),c=(null===(e=l.state)||void 0===e?void 0:e.rounds)||10,o=(null===(t=l.state)||void 0===t?void 0:t.seconds)||20,p=P(c,o),h=p.state,v=p.controls;Object(a.useEffect)((function(){!1===h.inProgress&&n("game-over",{score:h.score})}));var g=Object(a.useMemo)((function(){return h}),[h]);return r.a.createElement(R.Provider,{value:Object(b.a)({},g)},r.a.createElement(s.a,{style:{paddingTop:"10%"},text:!0},r.a.createElement(i.a,{columns:"equal"},r.a.createElement(i.a.Row,null,r.a.createElement(i.a.Column,null,r.a.createElement(m.a,{fluid:!0,color:"olive"},r.a.createElement(m.a.Content,null,r.a.createElement(f.a,{as:"h2"},r.a.createElement(z,null)))))),r.a.createElement(i.a.Row,{stretched:!0},r.a.createElement(i.a.Column,null,r.a.createElement(m.a,{fluid:!0,raised:!0},r.a.createElement(m.a.Content,{style:{fontSize:"20px"}},r.a.createElement(i.a,{columns:"equal"},r.a.createElement(i.a.Row,null,r.a.createElement(i.a.Column,null,r.a.createElement(S,{guess:v.guess})),r.a.createElement(i.a.Column,null,r.a.createElement(_,{startCounter:v.startCounter})))))))),r.a.createElement(i.a.Row,null,r.a.createElement(i.a.Column,{width:"14"},r.a.createElement(d.a,{onClick:v.clearCanvas,size:"massive",color:"olive",fluid:!0},"Clear Canvas")),r.a.createElement(i.a.Column,{width:"two"},r.a.createElement(d.a,{onClick:function(){return n("/")},size:"massive",fluid:!0,icon:!0,basic:!0,color:"olive"},r.a.createElement(E.a,{name:"home"})))))))},A="Hmmm, you can probably do better than that!",W="Not so shabby. Bet you can beat that in the next round!",F="Wow, impressive! You deserve a margarita at the beach \ud83c\udf78\ud83c\udf34",B=function(){var e=Object(u.f)().replace,t=Object(u.g)().state,n=t?t.score:0,a=n>=9?F:n>=5?W:A;return r.a.createElement(s.a,{style:{paddingTop:"10%"},text:!0},r.a.createElement(i.a,null,r.a.createElement(i.a.Row,null,r.a.createElement(i.a.Column,null,r.a.createElement(m.a,{fluid:!0,color:"blue"},r.a.createElement(m.a.Content,null,r.a.createElement(f.a,{as:"h1"},"Final score: ",n))))),r.a.createElement(i.a.Row,null,r.a.createElement(i.a.Column,null,r.a.createElement(m.a,{fluid:!0,raised:!0},r.a.createElement(m.a.Content,{style:{fontSize:"20px"}},r.a.createElement("p",null,"Thanks for playing"," ",r.a.createElement("span",{role:"img","aria-label":"gold medal emoji"},"\ud83e\udd47")),r.a.createElement("p",null,"You scored ",r.a.createElement("strong",null,n)," points."),r.a.createElement("p",null,a))))),r.a.createElement(i.a.Row,null,r.a.createElement(i.a.Column,{width:"14"},r.a.createElement(d.a,{onClick:function(){return e("/play")},size:"massive",color:"blue",fluid:!0},"Play again")),r.a.createElement(i.a.Column,{width:"two"},r.a.createElement(d.a,{onClick:function(){return e("/")},size:"massive",fluid:!0,icon:!0,basic:!0,color:"blue","aria-label":"home"},r.a.createElement(E.a,{name:"home"}))))))},U=function(){var e=Object(u.f)().push,t=Object(a.useState)(10),n=Object(O.a)(t,2),l=n[0],c=n[1],o=Object(a.useState)(20),E=Object(O.a)(o,2),p=E[0],b=E[1];return r.a.createElement(s.a,{style:{paddingTop:"10%"},text:!0},r.a.createElement(i.a,null,r.a.createElement(i.a.Row,null,r.a.createElement(i.a.Column,null,r.a.createElement(m.a,{fluid:!0,color:"orange"},r.a.createElement(m.a.Content,null,r.a.createElement(f.a,{as:"h1"},"Settings"))))),r.a.createElement(i.a.Row,null,r.a.createElement(i.a.Column,null,r.a.createElement(m.a,{fluid:!0,raised:!0},r.a.createElement(m.a.Content,{style:{fontSize:"20px",display:"flex",justifyContent:"space-between",flexDirection:"column"}},r.a.createElement("div",{style:{fontSize:"20px",display:"flex",justifyContent:"space-between",marginBottom:"16px"}},r.a.createElement("label",{htmlFor:"rounds"},"Number of rounds"),r.a.createElement("input",{type:"range",id:"rounds",name:"rounds",min:"1",max:"10",step:"1",value:l,onChange:function(e){return c(parseInt(e.target.value))}}),l),r.a.createElement("div",{style:{fontSize:"20px",display:"flex",justifyContent:"space-between"}},r.a.createElement("label",{htmlFor:"rounds"},"Seconds per round"),r.a.createElement("input",{type:"range",id:"rounds",name:"rounds",min:"5",max:"30",step:"5",value:p,onChange:function(e){return b(parseInt(e.target.value))}}),p))))),r.a.createElement(i.a.Row,null,r.a.createElement(i.a.Column,null,r.a.createElement(d.a,{onClick:function(){return e("/",{rounds:l,seconds:p})},size:"massive",color:"orange",fluid:!0},"Save and go back")))))},J=function(){return r.a.createElement(o.a,{basename:"/drawing-is-hard"},r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/"},r.a.createElement(p,null)),r.a.createElement(u.a,{exact:!0,path:"/settings"},r.a.createElement(U,null)),r.a.createElement(u.a,{path:"/play"},r.a.createElement(D,null)),r.a.createElement(u.a,{path:"/game-over"},r.a.createElement(B,null))))};c.a.render(r.a.createElement(J,null),document.getElementById("root"))}},[[155,1,2]]]);
//# sourceMappingURL=main.efe32b0a.chunk.js.map