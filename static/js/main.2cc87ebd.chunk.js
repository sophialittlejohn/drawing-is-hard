(this["webpackJsonpdrawing-is-hard"]=this["webpackJsonpdrawing-is-hard"]||[]).push([[0],{153:function(e,t,n){e.exports=n(293)},158:function(e,t,n){},285:function(e,t){},286:function(e,t){},287:function(e,t){},288:function(e,t){},289:function(e,t){},290:function(e,t){},291:function(e){e.exports=JSON.parse('["bird","book","car","cat","chair","flower","plane","sheep","ship","strawberry"]')},292:function(e,t,n){},293:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(34),l=n.n(c),o=(n(158),n(159),n(47)),u=n(29),s=n(298),i=n(302),m=n(300),f=n(303),E=n(301),d=function(){var e=Object(u.f)().push;return r.a.createElement(s.a,{style:{paddingTop:"10%"},text:!0},r.a.createElement(i.a,null,r.a.createElement(i.a.Row,null,r.a.createElement(i.a.Column,null,r.a.createElement(m.a,{fluid:!0,color:"blue"},r.a.createElement(m.a.Content,null,r.a.createElement(f.a,{as:"h1"},"Drawing Is Hard"))))),r.a.createElement(i.a.Row,null,r.a.createElement(i.a.Column,null,r.a.createElement(m.a,{fluid:!0,raised:!0},r.a.createElement(m.a.Content,{style:{fontSize:"20px"}},r.a.createElement("p",null,"This game has been modeled off Google's"," ",r.a.createElement("a",{href:"https://quickdraw.withgoogle.com/"},"Quick, Draw!")," ","game and uses a sampling from the Quick, Draw! dataset."),r.a.createElement("p",null,"It was developed in the context of my capstone project at"," ",r.a.createElement("a",{href:"https://www.extensionschool.ch/"},"EPFL Extension School"),"."),r.a.createElement("p",null,"Check out the source code in my"," ",r.a.createElement("a",{href:"https://github.com/sophialittlejohn/drawing-is-hard"},"GitHub repo"),"."))))),r.a.createElement(i.a.Row,null,r.a.createElement(i.a.Column,null,r.a.createElement(E.a,{onClick:function(){return e("/game")},size:"massive",primary:!0,fluid:!0},"Play")))))},p=n(36),h=n(42),b=n(31),v=n.n(b),w=n(49),g=n(21),O=n(50),C=function(){var e=Object(a.useState)(null),t=Object(g.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){var e=n>0&&setInterval((function(){return r(n-1)}),1e3);return function(){return clearInterval(e)}})),{counter:n,startCounter:function(e){r(e||_)},stopCounter:function(){r(null)}}},y={task:null,round:null,score:null,inProgress:null},j=function(e,t){switch(t.type){case"START_GAME":return{round:1,score:0,task:t.payload,inProgress:!0};case"NEW_ROUND":return Object(p.a)({},e,{task:t.payload,round:e.round+1});case"WIN_ROUND":return Object(p.a)({},e,{score:e.score+1,round:e.round+1,task:t.payload});case"GAME_OVER":return Object(p.a)({},e,{inProgress:!1,task:null});case"WIN_GAME":return Object(p.a)({},e,{inProgress:!1});default:throw new Error}};function k(e,t){var n,a=(n=e,O.b.fromPixels(n.current).resizeNearestNeighbor([28,28]).mean(2).expandDims(2).expandDims().toFloat().div(255));return t.predict(a).data().then(function(){var e=Object(w.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a(t).data();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}var x=r.a.memo((function(){var e=Object(a.useRef)(null);Object(a.useEffect)((function(){}));var t,n,c=!1;return Object(a.useEffect)((function(){var t=e.current,n=t.getContext("2d");n.fillStyle="#ffffff",n.fillRect(0,0,t.height,t.width)})),r.a.createElement("canvas",{height:300,width:300,ref:e,onMouseDown:function(){return c=!0},onMouseUp:function(){c=!1,t=void 0,n=void 0},onMouseMove:function(e){return function(e){var a=e.target.getBoundingClientRect(),r=e.clientX-a.left,l=e.clientY-a.top;if(c){var o=function(e,t,n,a,r){var c=e.getContext("2d");return c.strokeStyle="#000000",c.lineWidth=12,c.lineJoin="round",c.beginPath(),c.moveTo(a,r),c.lineTo(t,n),c.closePath(),c.stroke(),[t,n]}(e.target,r,l,t,n),u=Object(g.a)(o,2);t=u[0],n=u[1]}}(e)},id:"myCanvas",style:{border:"3px dotted gray",cursor:"pointer"}})})),R=r.a.createContext(),N=function(){var e=Object(a.useContext)(R);if(!e)throw new Error("This component must be used within a <Game /> component.");return e},P=function(){var e=N();return r.a.createElement("div",null,"Round ",e.round," of ",D)},S=n(68),G=n.n(S),I=(n(292),function(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e})),t.current}),M={delay:50,cursor:" ",wrapperClassName:"wrapper"},T=function(e){var t=e.startCounter,n=Object(a.useState)(null),c=Object(g.a)(n,2),l=c[0],o=c[1],u=Object(a.useState)(null),s=Object(g.a)(u,2),i=s[0],m=s[1],f=Object(a.useState)(null),E=Object(g.a)(f,2),d=E[0],p=E[1],h=N(),b=h.counter,v=h.task,w=h.score,O=h.inProgress,C=h.round,y=I(v),j=I(w),k=function(){o(null),m(null),p(null)};Object(a.useEffect)((function(){if(0===b&&k(),w&&j!==w)k(),window.setTimeout((function(){return o("Nice sketch! You have")}));else if(O&&v&&y!==v&&C<D+1){var e="Close... you have ";1===C&&(e="Let's get started, you have "),window.setTimeout((function(){return o(e)}))}}),[b,O,y,v,w,j,C]);var x=function(e,t,n){e.typeString(t).callFunction(n).start()};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"wrapper"},l&&r.a.createElement(G.a,{key:l,options:M,onInit:function(e){return x(e,l,(function(){return m("seconds to draw a")}))}}),i&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"whitespace"},b||_),r.a.createElement(G.a,{key:i,options:M,onInit:function(e){return x(e,i,(function(){return p("in the box to the left.")}))}})),d&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"whitespace"},v),r.a.createElement(G.a,{key:d,options:M,onInit:function(e){return x(e,d,(function(){return t()}))}}))))},D=10,_=20,A=function(){var e=Object(u.f)().replace,t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=Object(a.useRef)(null),r=Object(a.useRef)(null),c=Object(a.useRef)(null),l=C(),o=l.startCounter,u=l.counter,s=l.stopCounter,i=Object(a.useReducer)(j,y),m=Object(g.a)(i,2),f=m[0],E=f.round,d=f.task,p=f.inProgress,h=f.score,b=m[1],x=Object(a.useCallback)((function(){return Object(w.a)(v.a.mark((function e(){var a,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.c("../../model/model.json");case 2:a=e.sent,l=n(291),t.current=l,r.current=a,c.current=document.getElementById("myCanvas"),R();case 8:case"end":return e.stop()}}),e)})))}),[]),R=function(){b({type:"START_GAME",payload:t.current[0]})},N=function(){s(),b({type:"GAME_OVER"})},P=function(){if(h===e)s(),b({type:"WIN_GAME"});else if(E===e+1)s(),b({type:"GAME_OVER"});else{if(0!==u)return;S(c),s(),b({type:"NEW_ROUND",payload:t.current[E]})}},S=function(){var e=c.current;e.getContext("2d").fillRect(0,0,e.height,e.width)},G=function(){var e=Object(w.a)(v.a.mark((function e(){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r&&r.current&&c&&c.current)){e.next=5;break}return e.next=3,k(c,r.current);case 3:(n=e.sent)&&t.current[n[0]]===d&&(S(c),s(),b({type:"WIN_ROUND",payload:t.current[E]}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){x()}),[x]),Object(a.useEffect)((function(){p&&P()})),Object(a.useEffect)((function(){p&&u&&u<18&&G()})),{controls:{startGame:R,stopGame:N,clearCanvas:S,guess:G,startCounter:o},state:{inProgress:p,task:d,counter:u,round:E,score:h}}}(),c=t.state,l=t.controls;Object(a.useEffect)((function(){!1===c.inProgress&&e("game-over",{score:c.score})}));var o=Object(a.useMemo)((function(){return c}),[c]);return r.a.createElement(R.Provider,{value:Object(p.a)({},o)},r.a.createElement(s.a,{style:{paddingTop:"10%"},text:!0},r.a.createElement(i.a,{columns:"equal"},r.a.createElement(i.a.Row,null,r.a.createElement(i.a.Column,null,r.a.createElement(m.a,{fluid:!0,color:"olive"},r.a.createElement(m.a.Content,null,r.a.createElement(f.a,{as:"h2"},r.a.createElement(P,null)))))),r.a.createElement(i.a.Row,{stretched:!0},r.a.createElement(i.a.Column,null,r.a.createElement(m.a,{fluid:!0,raised:!0},r.a.createElement(m.a.Content,{style:{fontSize:"20px"}},r.a.createElement(i.a,{columns:"equal"},r.a.createElement(i.a.Row,null,r.a.createElement(i.a.Column,null,r.a.createElement(x,null)),r.a.createElement(i.a.Column,null,r.a.createElement(T,{startCounter:l.startCounter})))))))),r.a.createElement(i.a.Row,null,r.a.createElement(i.a.Column,{width:"14"},r.a.createElement(E.a,{onClick:l.clearCanvas,size:"massive",color:"olive",fluid:!0},"Clear Canvas")),r.a.createElement(i.a.Column,{width:"two"},r.a.createElement(E.a,{onClick:function(){return e("/")},size:"massive",fluid:!0,icon:!0,basic:!0,color:"olive"},r.a.createElement(h.a,{name:"home"})))))))},z="Hmmm, you can probably do better than that!",W="Not so shabby. Bet you can beat that in the next round!",F="Wow, impressive! You deserve a margarita at the beach \ud83c\udf78\ud83c\udf34",U=function(){var e=Object(u.f)().replace,t=Object(u.g)().state,n=t?t.score:0,a=n>=9?F:n>=5?W:z;return r.a.createElement(s.a,{style:{paddingTop:"10%"},text:!0},r.a.createElement(i.a,null,r.a.createElement(i.a.Row,null,r.a.createElement(i.a.Column,null,r.a.createElement(m.a,{fluid:!0,color:"blue"},r.a.createElement(m.a.Content,null,r.a.createElement(f.a,{as:"h1"},"Drawing is hard - Final score ",n))))),r.a.createElement(i.a.Row,null,r.a.createElement(i.a.Column,null,r.a.createElement(m.a,{fluid:!0,raised:!0},r.a.createElement(m.a.Content,{style:{fontSize:"20px"}},r.a.createElement("p",null,"GAME OVER!"),r.a.createElement("p",null,"You scored ",r.a.createElement("strong",null,n)," points."),r.a.createElement("p",null,a))))),r.a.createElement(i.a.Row,null,r.a.createElement(i.a.Column,{width:"14"},r.a.createElement(E.a,{onClick:function(){return e("/game")},size:"massive",color:"blue",fluid:!0},"Play again")),r.a.createElement(i.a.Column,{width:"two"},r.a.createElement(E.a,{onClick:function(){return e("/")},size:"massive",fluid:!0,icon:!0,basic:!0,color:"blue"},r.a.createElement(h.a,{name:"home"}))))))},B=function(){return r.a.createElement(o.a,null,r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/"},r.a.createElement(d,null)),r.a.createElement(u.a,{path:"/game"},r.a.createElement(A,null)),r.a.createElement(u.a,{path:"/game-over"},r.a.createElement(U,null))))};l.a.render(r.a.createElement(B,null),document.getElementById("root"))}},[[153,1,2]]]);
//# sourceMappingURL=main.2cc87ebd.chunk.js.map